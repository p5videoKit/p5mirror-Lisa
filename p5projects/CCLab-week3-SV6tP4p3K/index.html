<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>
    <script src="https://rawgit.com/spite/ccapture.js/master/build/CCapture.all.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
    

  </head>
  <body>
    <button id="capture"> Capture GIF </button>
    
    
    <script src="gif_capture.js"></script>
    <script src="sketch.js"></script>
    
    
    <script>
      
    
      let btn = document.getElementById("capture")
      btn.addEventListener("click", function(){
        
        let drawCopy = draw.bind({});
        setupGif(30); // 30 [fps] is how fast the GIF will play back

        let fc = frameCount;
        draw = function () {

          beginGif(fc + 2);    // start recording for the GIF
          drawCopy();
          endGif(fc + 2 + 448);   // stop recording the GIF after 450 frames
          document.getElementById("capture").innerHTML = "capture in progress..."+(frameCount-fc);
          document.getElementById("capture").disabled = "disabled";
        };
      })

      
        
     
      
    </script>
  </body>
</html>
